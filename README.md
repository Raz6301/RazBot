
# RazBot - Discord Dashboard Bot

RazBot הוא בוט דיסקורד עם לוח בקרה ווב שמטרתו לנהל את השרת שלך בצורה חכמה וידידותית. הבוט מפעיל שרת Express ומשתמש בספריית `discord.js` וממשק HTML מבוסס EJS לצורך ניהול הגדרות ופעולות שונות.

### יכולות עיקריות

- 🎁 **מערכת הגרלות מלאה** – ניתן להתחיל, לסיים, לבצע רירול או למחוק הגרלה דרך הדשבורד.
- 🎫 **מערכת טיקטים** – פתיחת טיקט בלחיצת כפתור, מעבר אוטומטי לקטגוריית טיקטים סגורים וייצוא הודעות הטיקט לקובץ.
- 📊 **סטטיסטיקות חיות** – הצגת מספר משתמשים, חדרים ורולים כולל גרף דינמי באמצעות Chart.js. הנתונים מתעדכנים דרך `/api/stats` ומוצגים בגרף בר בדשבורד.
- 🧼 **סינון מילים, קישורים ותיוגים** – אפשרות לחסום מילים אסורות, קישורים בלתי רצויים ופינגים דרך הגדרות הדשבורד.
- 📥 **מעקב הזמנות** – מציג מי הזמין משתמשים חדשים ומונה את מספר ההזמנות לכל משתמש.
- 🛠️ **הודעות אוטומטיות מותאמות אישית** – מערכת הודעות ברוכים הבאים, הזמנות ושגיאות הניתנות לעריכה.
- ⚙️ **הגדרות גמישות בקובץ `config.json`** – ניתן להגדיר שמות רולים וקטגוריות, מילים אסורות, חסימת קישורים/תיוגים ואף את הפורט שבו ירוץ הדשבורד.

- 🔐 **התחברות מנהלית** – באפשרותך להגן על לוח הבקרה באמצעות סיסמת מנהל. הגדר משתנה סביבה `ADMIN_PASSWORD` והדשבורד ידרוש כניסה לפני גישה לתוכן. לאחר הזדהות תישמר עוגייה בדפדפן.

- 🌍 **תמיכה בעברית ובאנגלית** – ניתן לבחור שפה באמצעות פרמטר `?lang=he` או `?lang=en`. תפריטים וכותרות מוצגים בהתאם.

הבוט משתמש במשתני סביבה (`.env`) עבור הטוקן ובמשתנה `PORT` (אופציונלי) להגדרת הפורט אם ברצונך לסטות מהערך ברירת המחדל שב־`config.json`.

## קבצים חשובים

| קובץ | תיאור |
|------|--------|
| `main.js` | הקובץ הראשי של הבוט |
| `.env` | כולל את הטוקן שלך: `TOKEN=...` |
| `config.json` | כל ההגדרות (מילים אסורות, רולים, בלוקים וכו׳) |
| `config.json` | כל ההגדרות: מילים אסורות, חסימת קישורים ופינגים, שמות קטגוריות וטווחי זמנים, פורט (`port`) ועוד |
| `dashboard.js` | מגדיר את נתיבי ה‑Express לדשבורד ול‑API, כולל `/api/stats` ופעולות על הגרלות וטיקטים |
| `invites.js` | מערכת מעקב אחרי הזמנות |
| `giveaways.json` | מאגר הגרלות רצות |
| `views/index.ejs` | דשבורד HTML מעוצב |
| `public/style.css` | עיצוב האתר |

## הוראות התקנה

1. התקן את התלויות:
```bash
npm install
```

2. צור קובץ `.env` עם הטוקן שלך:
```env
TOKEN=הכנס_כאן_את_הטוקן_שלך
```

3. הרץ את הבוט:
```bash
node main.js
```

## כתובת הדשבורד

ברירת המחדל היא `http://localhost:3000`, אך ניתן לשנות את הפורט באחד משני דרכים:

1. עריכת השדה `port` בקובץ `config.json`.
2. הגדרת משתנה הסביבה `PORT` לפני ההרצה.

```
# הרצת הבוט על פורט 8080 לדוגמה
PORT=8080 node main.js
```

הדשבורד זמין רק באופן מקומי מהמחשב שבו הוא רץ, ומהווה כלי ניהול לעצמך ולצוות.

---

בהצלחה! 🎉

## הגדרות בקובץ `config.json`

להלן כמה מהשדות החשובים בקובץ ההגדרות וכיצד הם משפיעים על הבוט:

| שם שדה | תיאור |
| ------ | ------ |
| `blockLinks` | אם אמת – הבוט ימחק הודעות המכילות קישורים חשודים (http, https, discord.gg). |
| `blockPings` | אם אמת – ייחסמו @everyone ו‑@here. |
| `forbiddenWords` | מערך מילים שהופעתן תוביל למחיקת ההודעה ושליחת אזהרה. |
| `autoRoleName` | שם הרול שיינתן אוטומטית לכל מצטרף חדש לשרת. |
| `ticketCategoryName` | שם הקטגוריה בה ייווצרו טיקטים חדשים. |
| `closedTicketsCategoryName` | שם הקטגוריה אליה יועברו טיקטים לאחר סגירה. |
| `port` | הפורט שעליו ירוץ הדשבורד. ניתן לעקוף באמצעות משתנה סביבה `PORT`. |

## משתני סביבה נוספים

| משתנה | תיאור |
| ------ | ------ |
| `TOKEN` | טוקן הבוט מדיסקורד. חובה. |
| `PORT` | (אופציונלי) עקיפה של השדה `port` בקובץ ההגדרות להגדרת פורט אחר לדשבורד. |
| `ADMIN_PASSWORD` | (אופציונלי) סיסמה להגנה על לוח הבקרה. כאשר מוגדרת, הדשבורד ידרוש כניסה עם סיסמה זו. |

לשינוי ההגדרות, פשוט ערכו את הקובץ ושמרו. אין צורך להפעיל מחדש את הבוט עבור חלק מהשינויים (למשל מילים אסורות) אך עבור אחרים מומלץ לבצע הפעלה מחדש.
